# ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - –ö–æ—Ä–æ—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏ v2.0

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã
```bash
cd /opt/hg-doc-storage
docker-compose down
```

### 2. –ü–æ–ª—É—á–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
git pull origin main
```

### 3. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env —Ñ–∞–π–ª
cat .env | grep BASE_URL

# –ï—Å–ª–∏ –Ω–µ doc.yourcompany.ru, —Ç–æ –æ–±–Ω–æ–≤–∏—Ç—å:
sed -i 's/your-domain.com/doc.yourcompany.ru/g' .env
sed -i 's/https:\/\/.*$/https:\/\/doc.yourcompany.ru/g' .env
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
```bash
./deploy.sh
```

### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É
```bash
# –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
curl https://doc.yourcompany.ru/health

# –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
./test_short_links.sh
```

---

## üìé –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫

### –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å 1–°

#### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
```http
POST https://doc.yourcompany.ru/api/v1/upload
Authorization: Bearer YOUR_API_KEY
Content-Type: multipart/form-data

client_id=CLIENT_123
contract_type=surgery
file=@contract.pdf
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "contract_id": "550e8400-e29b-41d4-a716-446655440000",
  "short_id": "abc12345", 
  "short_url": "https://doc.yourcompany.ru/abc12345"
}
```

#### 2. –û—Ç–ø—Ä–∞–≤–∫–∞ SMS –∫–ª–∏–µ–Ω—Ç—É
```
–î–æ–≥–æ–≤–æ—Ä –≥–æ—Ç–æ–≤ –∫ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—é: https://doc.yourcompany.ru/abc12345
```

#### 3. –ö–ª–∏–µ–Ω—Ç —Å–∫–∞—á–∏–≤–∞–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª
```
GET https://doc.yourcompany.ru/abc12345
‚Üí –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª
```

#### 4. –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
```http
POST https://doc.yourcompany.ru/api/v1/sign/550e8400-e29b-41d4-a716-446655440000
Authorization: Bearer YOUR_API_KEY

signer_id=SIGNER_456
file=@signed_contract.pdf
```

**–û—Ç–≤–µ—Ç (—Ç–∞ –∂–µ —Å—Å—ã–ª–∫–∞!):**
```json
{
  "short_url": "https://doc.yourcompany.ru/abc12345"
}
```

#### 5. –ö–ª–∏–µ–Ω—Ç —Å–∫–∞—á–∏–≤–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
```
GET https://doc.yourcompany.ru/abc12345
‚Üí –¢–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Ñ–∞–π–ª!
```

---

## üîß –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
docker-compose ps
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
```bash
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
docker-compose logs -f app | tail -20

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö  
docker-compose logs db | grep -i error

# Nginx
docker-compose logs nginx | grep -i error
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î
```bash
docker-compose exec db psql -U postgres -d contract_db -c "\d contracts" | grep short_id
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
```bash
# Health check
curl https://doc.yourcompany.ru/health

# –¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–¥–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å 401)
curl https://doc.yourcompany.ru/api/v1/status/test

# –¢–µ—Å—Ç —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
curl -H "Authorization: Bearer YOUR_API_KEY" \
     https://doc.yourcompany.ru/api/v1/status/550e8400-e29b-41d4-a716-446655440000
```

---

## üì± SMS —à–∞–±–ª–æ–Ω—ã

### –î–ª—è –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
```
–î–æ–≥–æ–≤–æ—Ä –≥–æ—Ç–æ–≤ –∫ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—é: https://doc.yourcompany.ru/abc12345
```

### –ü–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è  
```
–î–æ–≥–æ–≤–æ—Ä –ø–æ–¥–ø–∏—Å–∞–Ω: https://doc.yourcompany.ru/abc12345
```

### –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π
```
–í–∞—à –¥–æ–≥–æ–≤–æ—Ä: https://doc.yourcompany.ru/abc12345
–°—Å—ã–ª–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é.
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
‚úÖ –í—Å–µ —Å—Ç–∞—Ä—ã–µ API —Ä–∞–±–æ—Ç–∞—é—Ç  
‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–µ —Å–ª–æ–º–∞—é—Ç—Å—è  
‚úÖ –ü–æ–ª–Ω—ã–µ UUID –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è  

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚úÖ –ö–æ—Ä–æ—Ç–∫–∏–µ ID —É–Ω–∏–∫–∞–ª—å–Ω—ã (2.8 —Ç—Ä–∏–ª–ª–∏–æ–Ω–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π)  
‚úÖ Rate limiting –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ  
‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π  

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤  
‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î  
‚úÖ CDN-ready –∑–∞–≥–æ–ª–æ–≤–∫–∏  

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:** `docker-compose logs -f app`
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å:** `docker-compose restart app`  
3. **–û—Ç–∫–∞—Ç–∏—Ç—å:** `git checkout HEAD~1 && ./deploy.sh`
4. **–û–±—Ä–∞—Ç–∏—Ç—å—Å—è:** zardes@dochealthgardenru

**–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:**
- [–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ](docs/SHORT_LINKS_GUIDE.md)
- [API —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è](docs/1C_API_SPECIFICATION.md)  
- [–ü—Ä–∏–º–µ—Ä—ã CURL](docs/CURL_EXAMPLES.md)
- [Changelog](CHANGELOG.md)

---

**üéâ –ì–æ—Ç–æ–≤–æ! –°–∏—Å—Ç–µ–º–∞ —Å –∫–æ—Ä–æ—Ç–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –∑–∞–ø—É—â–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.**
